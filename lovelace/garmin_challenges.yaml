type: entities
view_layout:
  grid-area: garmin_challenges
card_mod:
  style: |
    ha-card {
      border-radius: 10px;
    }
title: Garmin Challenges
entities:
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.april_namaste'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-04-07").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.april_namaste
    row:
      type: custom:bar-card
      entity: sensor.april_namaste
      icon: mdi:yoga
      name: "${'April Namaste ' + (parseFloat(CURRENT) >= 60 ? 'COMPLETE! (' + CURRENT + ' minutes)' : CURRENT + ' / 60 min (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 60
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 59.99
          color: darkred
        - from: 60
          to: 1000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.step_into_april'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-04-14").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.step_into_april
    row:
      type: custom:bar-card
      entity: sensor.step_into_april
      icon: mdi:shoe-print
      name: "${'Step Into April ' + (parseInt(CURRENT) >= 115000 ? 'COMPLETE! (' + CURRENT + ' steps)' : CURRENT + ' / 115,000 steps (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 115000
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 114999.99
          color: darkred
        - from: 115000
          to: 400000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.april_step_month'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-04-30").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.april_step_month
    row:
      type: custom:bar-card
      entity: sensor.april_step_month
      icon: mdi:shoe-print
      name: "${'April Step Month ' + (parseInt(CURRENT) >= 300000 ? 'COMPLETE! (' + CURRENT + ' steps)' : CURRENT + ' / 300,000 steps (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 300000
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 299999.99
          color: darkred
        - from: 300000
          to: 500000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.april_cycling_climb'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-04-30").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.april_cycling_climb
    row:
      type: custom:bar-card
      entity: sensor.april_cycling_climb
      icon: mdi:bike
      name: "${'April Cycling Climb ' + (parseFloat(CURRENT) >= 20000 ? 'COMPLETE! (' + CURRENT + ' feet)' : CURRENT + ' / 20,000 ft (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 20000
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 19999.99
          color: darkred
        - from: 20000
          to: 100000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.april_rundown'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-04-30").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.april_rundown
    row:
      type: custom:bar-card
      entity: sensor.april_rundown
      icon: mdi:run
      name: "${'April Rundown ' + (parseFloat(CURRENT) >= 50 ? 'COMPLETE! (' + CURRENT + ' miles)' : CURRENT + ' / 50 mi (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 50
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 49.99
          color: darkred
        - from: 50
          to: 100000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.cycling_stage_2'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-06-30").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.cycling_stage_2
    row:
      type: custom:bar-card
      entity: sensor.cycling_stage_2
      icon: mdi:bike
      name: "${'Cycling Stage 2 ' + (parseFloat(CURRENT) >= 505 ? 'COMPLETE! (' + CURRENT + ' miles)' : CURRENT + ' / 505 mi (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 505
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 504.99
          color: darkred
        - from: 505
          to: 100000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.running_stage_2'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-06-30").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.running_stage_2
    row:
      type: custom:bar-card
      entity: sensor.running_stage_2
      icon: mdi:run
      name: "${'Running Stage 2 ' + (parseFloat(CURRENT) >= 313.8 ? 'COMPLETE! (' + CURRENT + ' miles)' : CURRENT + ' / 313.8 mi (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 313.8
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 313.79
          color: darkred
        - from: 313.8
          to: 100000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }
  - type: custom:config-template-card
    variables:
      CURRENT: states['sensor.walking_stage_2'].state
      DAYS_REMAINING: Math.ceil((new Date("2021-06-30").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
    entities:
      - sensor.walking_stage_2
    row:
      type: custom:bar-card
      entity: sensor.walking_stage_2
      icon: mdi:walk
      name: "${'Walking Stage 2 ' + (parseFloat(CURRENT) >= 91 ? 'COMPLETE! (' + CURRENT + ' mi)' : CURRENT + ' / 91 mi (' + DAYS_REMAINING + ' days remaining)')}"
      min: 0
      max: 91
      entity_row: true
      positions:
        value: 'off'
      severity:
        - from: 0
          to: 90.99
          color: darkred
        - from: 91
          to: 100000
          color: darkgreen
      style: |
        bar-card-contentbar {
          font-weight: bold;
          color: gold;
        }
        bar-card-name {
          margin-left: 10px;
        }
        bar-card-currentbar {
          border-radius: 10px;
        }
        bar-card-backgroundbar {
          border-radius: 10px;
        }