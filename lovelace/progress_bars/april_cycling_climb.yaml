type: custom:config-template-card
variables:
  CURRENT: parseInt(states['sensor.april_cycling_climb'].state)
  DAYS_REMAINING: Math.ceil((new Date("2021-04-30").getTime() - new Date().getTime()) / (1000*60*60*24)) + 1
  GOAL: 20000
  addCommas: |
    num => {
      return num.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",")
    }
entities:
  - sensor.april_cycling_climb
row:
  type: custom:bar-card
  entity: sensor.april_cycling_climb
  icon: mdi:bike
  name: "${'April Cycling Climb: ' + (CURRENT >= GOAL ? 'COMPLETE! (' + addCommas(CURRENT) + ' feet)' : addCommas(CURRENT) + ' / ' + addCommas(GOAL) + ' ft (' + DAYS_REMAINING + ' days remaining)')}"
  min: 0
  max: "${GOAL}"
  entity_row: true
  positions:
    value: 'off'
  severity:
    - from: 0
      to: "${GOAL - 0.01}"
      color: darkred
    - from: "${GOAL}"
      to: "${GOAL + 100000}"
      color: darkgreen
  style: |
    bar-card-contentbar {
      font-weight: bold;
      color: gold;
    }
    bar-card-name {
      margin-left: 10px;
    }
    bar-card-currentbar {
      border-radius: 10px;
    }
    bar-card-backgroundbar {
      border-radius: 10px;
    }