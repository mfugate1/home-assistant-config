automation:
  - alias: 'Christmas tree on at sunset'
    id: christmas_tree_on_at_sunset
    trigger:
      platform: numeric_state
      entity_id: sun.sun
      attribute: elevation
      below: -2.0
    action:
      service: switch.turn_on
      target:
        entity_id: switch.christmas_tree
        
sensor:
  - platform: rest
    name: tablet
    json_attributes:
      - batteryLevel
      - kioskMode
      - screenBrightness
      - motionDetectorState
      - maintenanceMode
      - appFreeMemory
      - appUsedMemory
      - totalFreeMemory
      - totalUsedMemory
      - hostname4
      - ip4
      - mac
      - locationLatitude
      - locationLongitude
      - locationAltitude
      - startUrl
      - currentPage
    resource: !secret tablet_rest_url
    value_template: "{{ value_json.isScreenOn if 'isScreenOn' in value_json else 'off' }}"

template:
  - sensor:
      - name: battery_livingroom_tablet
        state: "{{ state_attr('sensor.tablet', 'batteryLevel') }}"